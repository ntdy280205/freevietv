<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Free Vietnamese TV</title>
  <link href="https://vjs.zencdn.net/8.5.2/video-js.css" rel="stylesheet" />
  <link href="tv.css" rel="stylesheet" />
</head>
<body>

  <!-- Player bên trái -->
  <div class="player-container" id="playerContainer">
<video id="my-video" 
       class="video-js vjs-big-play-centered" 
       controls 
       autoplay 
       muted 
       playsinline 
       preload="auto"
       poster="images/tv247_background.png">
  <source src="https://live.fptplay53.net/fnxhd1/vtv1hd_vhls.smil/chunklist_b5000000.m3u8" type="application/x-mpegURL" />
  Vui lòng nâng cấp phiên bản trình duyệt hoặc thiết bị để có thể xem chương trình này.
</video>
  </div>

  <!-- Danh sách kênh bên phải (iframe) -->
  <div class="channel-list">
    <iframe src="channels.html" class="channel-frame"></iframe>
  </div>

  <script src="https://vjs.zencdn.net/8.5.2/video.min.js"></script>
  <script>
    const player = videojs('my-video');
    const container = document.getElementById('playerContainer');

    // poster nền ban đầu
    container.style.setProperty('--poster', 'url("https://test-streams.mux.dev/x36xhzz/poster.jpg")');

    // Nhận sự kiện từ iframe channels.html
    window.addEventListener("message", e => {
      if (e.data && e.data.src) {
        const src = e.data.src;
        const poster = e.data.poster || '';
        if (poster) {
          player.poster(poster);
          container.style.setProperty('--poster', `url("${poster}")`);
        }
        player.src({ src, type: 'application/x-mpegURL' });
        player.play();
      }
    });
  </script>
</body>
</html>


